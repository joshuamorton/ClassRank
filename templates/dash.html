<!DOCTYPE html>
<html>
    <head>
        <title>ClassRank</title>
        {% include "head.html" %}
        <link rel="stylesheet" type="text/css" href="/static/splash.css">
        <link rel="stylesheet" type="text/css" href="/static/font-awesome/css/font-awesome.min.css">
        <script type="text/javascript" src="/static/js/socket.js"></script>
        <script type="text/javascript">
        function addForm(course_id, clickEvent){
             var data = {
                    //sets values to be sent to the websocket and then used by the 
                    username:"{{user.user_name}}",
                    apikey:"{{user.apikey}}",
                    course:course_id,
                }

            function callback(returnedObject, clickEvent){
                location.reload(true);
            }

            var result = makeConnection("{{socketbase}}"+"api/add_course", data, callback, clickEvent);

        }
        </script>
    </head>
    <body>
        <div id="container" class="pure-g">
            {% include "sidebar.html" %}
            <div id="main" class="pure-u-md-18-24 pure-u-lg-18-24 pure-u-xl-18-24">
                <h2>Welcome </h2>
                <h2>Your Courses</h2>
                <table class="pure-table pure-table-bordered">
                    <thead><th>Course id</th><th>Course name</th><th>Identifier</th><th>Semester</th><th>Year</th><th>Professor</th><th>Rating</th><th>Difficulty</th><th>Grade</th></thead>
                    {% for course in your_courses %}
                    <tr><td>{{course.course_id}}</td>
                        <td>{{course.course_name}}</td>
                        <td>{{course.identifier}}</td>
                        <td>{{course.semester or "??"}}</td>
                        <td>{{course.year or "??"}}</td>
                        <td>{{course.professor or "??"}}</td>
                        <td>{{your_ratings[course.course_id].rating or "--"}}</td>
                        <td>{{your_ratings[course.course_id].difficulty or "--"}}</td>
                        <td>{{your_ratings[course.course_id].grade or "--"}}</td>
                    </tr>
                    {% end for %}
                </table>
                <h2>Availible Courses</h2>
                <table class="pure-table pure-table-bordered">
                    <thead><th>Course id</th><th>Course name</th><th>Identifier</th><th>Semester</th><th>Year</th><th>Professor</th><th>Rate</th></thead>
                    {% for course in school_courses %}
                    <tr><td>{{course.course_id}}</td>
                        <td>{{course.course_name}}</td>
                        <td>{{course.identifier}}</td>
                        <td>{{course.semester or "??"}}</td>
                        <td>{{course.year or "??"}}</td>
                        <td>{{course.professor or "??"}}</td>
                        <td><a href="javascript:void(0);" onclick="addForm({{course.course_id}}, event)"><i class="fa fa-toggle-right"></i></a></td>
                    </tr>
                    {% end for %}
                </table>
            </div>
        </div>
    </body>
</html>